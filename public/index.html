<html>
    <head>
        <meta charset="utf-8" />
        <title>Meu Primeiro Jogo Multiplayer</title>

        <style>
            #screen {
                border: 10px solid #ccc;
                background-color: black;
                image-rendering: pixelated;
                image-rendering: crisp-edges;
                image-rendering: -moz-crisp-edges;
                width: 630;
                height: 630;
                position: absolute;
                left: 25%;
                display: block;
            }

            #scoreboard {
                width: 100px;
                height: 50px;
            }

            #demo {
                border: 1px solid black;
                border-radius:10px;
                text-align: center;
                font-size: 50px;
                font-weight: bold;
            }

        </style>
        <script src="/socket.io/socket.io.js"></script>
    </head>
    <body>
        <canvas id="screen" width="500" height="500"></canvas>

        <div id="scoreboard">
            <p id="demo">0:0</p>
        </div>

        <script type="module">
            import createKeyboardListener from './keyboard-listener.js'
            import createGame from './game.js'
            import renderScreen from './render-screen.js'

            
            const game = createGame()
            const keyboardListener = createKeyboardListener()
            keyboardListener.subscribe(game.movePlayer)
            setInterval( game.moveBall, 1000 / 30 )

            const screen = document.getElementById('screen')

            renderScreen(screen, game, requestAnimationFrame)
            
            const socket = io()
            socket.on('connect', () => {
                const playerId = socket.id
                console.log(`>Player connected on Client with id: ${playerId}`)
            })

        </script>
    </body>
</html>